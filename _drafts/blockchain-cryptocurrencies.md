> หนังสือที่ดีมาก ๆ ในด้านนี้คือ Mastering Bitcoin: Unlocking Digital Cryptocurrencies โดย Andreas M. Antonopoulos

# Bitcoin and Cryptocurrencies

## อะไรทำให้ธนบัตรมีค่า ? แล้วอะไรทำให้ Bitcoin มีค่า ? 

สิ่งที่ทำให้ธนบัตรมีค่าก็เพราะว่า "ทุกคนเชื่อว่ามันมีค่า" 

สิ่งที่ทำให้ Bitcoin ก็เพราะว่า "ทุกคนเชื่อว่ามันมีค่า" 

ลองเปรียบเทียบ Bitcoin กับการซื้อบริษัท startup ที่กำลังจะมาขายไอเดียกับเรา บริษัท startup ที่ว่ายังไม่มีผลงาน ไม่มีอะไรเลยนอกจากไอเดีย อันที่จริงมูลค่าที่แท้จริงของบริษัทก็คือ 0 บาท แน่นอนเพราะว่าไม่มีอะไรที่ขายทอดตลาดได้ แต่บริษัทนั้นก็มีค่า เพราะเหตุผลง่าย ๆ ที่ว่า "เราคิดว่ามันมีอนาคต มันน่าจะทำอะไรที่ขายของได้ แล้วการที่มันขายของได้มันก็จะมีค่ามากขึ้น เพราะคนอื่น ๆ ก็จะคิดว่ามันมีค่า"

คราวนี้ลองเอาไอเดียนี้กลับมาที่ Bitcoin ตอนแรกนั้น Bitcoin ไม่ได้ต่างจากบริษัทพวกนี้เลย มันไม่มีค่า ก็เพราะว่าใครจะไปให้ค่ากับตัวเลขในบัญชีซึ่งไม่เห็นมีหลักประกันอะไรเลยล่ะ ? แต่ในมุมนึง ... เราก็ต้องยอมรับว่า Bitcoin มันมีคุณค่า มันมีประโยชน์ที่มันจะสร้างให้กับคนส่วนใหญ่ นั่นก็คือทดแทนเงินที่เราใช้ในปัจจุบันนี้ ไม่ว่าจะมีคนเชื่อหรือไม่เชื่อว่ามันจะเป็นจริงหรือเปล่า ? แต่ที่แน่ ๆ ก็คือมันมีคน "เชื่อ" และคนเหล่านี้ก็ยินดีที่จะให้ "ค่า" กับมันไม่มากก็น้อย

## ถ้าจะสร้าง Bitcoin ต้องอาศัยอะไรบ้าง ? 

> ไม่มีใครเชื่อเงินที่ใคร ๆ ก็สามารถปลอมมันขึ้นมาได้ หรือว่าพิมพ์ได้ไม่จำกัดหรอก

วิธีการทำให้อะไรก็ตามมีค่า สิ่งที่หนึ่งที่สำคัญมาก ๆ ก็คือ "มันต้องมีจำกัด" ไม่งั้นระบบเศรษฐศาสตร์ก็จะบอกว่าราคามันจะกลายเป็น 0 นั่นคือสิ่งสุดท้ายที่สกุลเงินใด ๆ ต้องการ

อีกส่วนหนึ่ง ก็คือในระบบเงินตราใด ๆ เราจะต้องเก็บข้อมูลไว้ว่า "บัญชี" หนึ่ง ๆ มีเงินเท่าไหร่ แล้วจะต้องไม่มีเงินเพิ่มเข้ามา ถ้าไม่มีการ "โอนเงิน" เข้ามา และจะต้องไม่มีเงินหายไปยกเว้นแต่จะมีการ "โอนเงิน" ออกไป นั่นแปลว่าถ้าไม่ใช่เจ้าของบัญชีแล้วก็จะทำให้เงินออกจากบัญชีไม่ได้ และไปเข้าบัญชีอื่นไม่ได้

และรายการเดินบัญชีในอดีตจะถูกแก้ไขไม่ได้อะไรที่ทำไปแล้ว ก็ต้องเป็นอย่างนั้นไปตลอด !

วิธีการที่เราใช้ในปัจจุบันก็คือ แต่ละคนรักษาเงินที่ตัวเองมี อาจจะเอาเงินที่มีไปฝังดินไว้ หรือฝากธนาคารไว้ ก็จะมีใครมาหยิบเอาไปไม่ได้และก็ไม่มีใครสามารถสร้างเงินขึ้นมาเองได้ เพราะว่าการพิมพ์ธนบัตรนั้นยากมาก ๆ และการพิมพ์ก็มีโทษหนัก นั่นทำให้เงินตราในปัจจุบันมีค่าและเป็นระบบที่สามารถทำงานได้จริง ๆ 

หาก Bitcoin ต้องการจะมีคุณค่า และสามารถใช้งานได้จริง ๆ Bitcoin ก็จะต้องมี "ที่เก็บข้อมูล" ว่าแต่ละบัญชี มีเงินเท่าไหร่ แล้วอยู่ดี ๆ จะมีคนมาแก้ไม่ได้ อยู่ดี ๆ จะมีคนเสกเงินเข้ามาบัญชีไม่ได้ อยู่ดี ๆ จะมีเงินไหลออกจากบัญชีใครโดยที่ไม่ได้รับอนุญาตไม่ได้ 

อันที่จริงการแก้ปัญหาเหล่านี้อาจจะไม่ยากเย็นเท่าไหร่ ก็เพราะว่าเราก็ใช้งานฐานข้อมูลนี้อยู่แล้ว เรียกว่า "ธนาคาร" เราไม่ต้องจับเงินจริง ๆ แต่ว่าธนาคารทำบัญชีเหล่านี้ให้เรา เค้าอาจจะใช้ฐานข้อมูลอะไรก็ได้ที่น่าเชื่อถือ แล้วเค้าก็คือคนเดียวที่สามารถแก้ไขข้อมูลได้ ถ้าเค้าเล่นตามกฎ ทุกอย่างก็จะเป็นไปตามกฎ แล้วเงินก็มีค่า ... 

แต่ใน Bitcoin มีแนวทางที่ต่างออกไป Bitcoin ไม่ชอบธนาคาร bitcoin ไม่ต้องการให้มีใครเลยเป็นเจ้าของ หรือมีอำนาจ ดังนั้น Bitcoin จึงได้ชื่อว่าเป็น *decentralized monetary system* คือระบบเงินตราที่ไม่มีศูนย์กลาง แต่เราจะสร้างที่เก็บข้อมูลที่ไม่มีใครเป็นคนดูแลและมีอำนาจพิเศษได้ยังไงล่ะ ? 

ดังนั้น Bitcoin จึงถูกพัฒนาขึ้นมาพร้อมกับฐานข้อมูลแบบใหม่ พร้อมด้วยแนวคิดใหม่ ๆ และฐานข้อมูลนี้ไม่ได้มีประโยชน์เพียงทำ Bitcoin ให้เป็นจริงได้เท่านั้น แต่ยังมีคุณอีกมากสำหรับแทบจะทุก ๆ อย่างในชีวิตเราเลยด้วยซ้ำ สิ่งนั้นคือ **Blockchain**

**Blockchain** ในมุมมองที่ตื้นที่สุด ก็คือ "ฐานข้อมูล" ที่ทุก ๆ คนช่วยกันดูแล แต่ว่าไม่มีใครมีหน้าที่พิเศษ หรืออำนาจพิเศษที่จะแก้ไขมัน คำว่าแก้ไขในที่นี้ก็คือการ "เขียนเพิ่ม" เท่านั้น เพราะลักษณะสำคัญอย่างหนึ่งของ Blockchain ก็คือ "อดีต" ผ่านมาแล้วผ่านไป ไม่สามารถกลับไปแก้ไขได้ ! ดังนั้นใครที่โอนเงินไปแล้ว ไม่ว่านานเท่าไหร่ ธุรกรรมนั้นก็จะต้องอยู่ในฐานข้อมูลนี้ตลอดไป !

หาก Bitcoin มีจำนวนจำกัด และ สามารถรักษาความเถรตรงของข้อมูลได้ สองอย่างนี้ก็จะทำให้ Bitcoin เริ่มจะมีคุณค่าขึ้นมาแล้ว ! 

## มีอะไรนอกจาก Bitcoin อีกมั้ย ? 

> Bitcoin เป็นเจ้าแรก แต่ว่าไม่ใช่เจ้าสุดท้ายแน่ ๆ 

มีสิ ! Bitcoin เป็นเจ้าแรก แต่ไม่ใช่เจ้าสุดท้ายแน่ ๆ 

* ในระบบเงินตราก็จะมี Litecoin, Zcash และอื่น ๆ 
* สำหรับ Smart Contract ก็เช่น Ethereum
* สำหรับ Cloud Storage ก็เช่น Storj
* สำหรับ Distributed Internet ก็เช่น SAFE Network

ไม่ใช่ทุกอันอาศัย Blockchain ด้วยนะ ! แต่ส่วนใหญ่แล้วก็ใช้ Blockchain อย่าง SAFE Network นั้นไม่ได้ใช้ Blockchain*

ลองดูจาก link นี้ ! https://coinmarketcap.com/ เรียงลำดับ cryptocurrency ตามมูลค่าตลาดของมัน

## แนวโน้มราคาของ Bitcoin และสกุลอื่น ๆ 

Bitcoin คือ เบอร์หนึ่งของวงการ cryptocurrency บนโลกใบนี้ แต่ตอนนี้ก็ไม่ได้แปลว่า ไม่มีคู่แข่งที่ใกล้เคียงเลยซะทีเดียว เพราะว่า Ethereum ก็มาเป็นอันดับสองที่ไม่ได้ห่างกันนักในเชิงของมูลค่ารวม

แต่มูลค่ารวมไม่ได้บ่งบอกถึงการจับจ่ายจริง ๆ ของสกุลเงินเหล่านี้ ต้องยอมรับว่า "แทบจะไม่มีคนใช้เงินเหล่านี้จริง ๆ หรอก" ก็เพราะว่าไม่มีร้านค้าไหนรับ ก็เพราะยังไม่มีร้านค้าไหนพร้อมที่จะเสี่ยงกับมัน แม้จะมีบางร้านที่พอจะรับความเสี่ยงนี้ แต่ก็นับว่าเป็นส่วนน้อยมาก ๆ 

ทำให้มูลค่าที่แท้จริงที่มาจากการใช้งานของ Bitcoin นั้น ยังต่ำมาก ๆ แล้วราคาที่เราเห็นทุกวันนี้ก็คือ "ความตื่นเต้น" ของตลาดซะมากกว่า นี่ก็เป็นในทางเดียวกับ Ethereum ซึ่งราคาขึ้นมามากกว่า 20 เท่าในช่วงสองเดือนที่ผ่านมา

# The Blockchain

> Blockchain คือ แก่นแท้ของ bitcoin และเบื้องหลังของการปฏิวัติทาง internet ในยุคของเรา !

## Blockchain ทำอะไรได้ ? 

สิ่งที่ Blockchain ทำได้คือ 

1. เก็บข้อมูล ทำตัวเหมือนเป็นเป็นกองกระดาษที่เรียงต่อกันเป็นชั้น ๆ 
2. ข้อมูลที่เขียนเข้าไปจะทำงานแบบ "เขียนต่อ" อย่างเดียว 
3. ไม่มีการ "แก้ไข" ไม่มีใครสามารถกลับไปแก้ไขอดีตได้
4. ไม่ต้องมีศูนย์กลาง ไม่ต้องมีใครทำหน้าที่พิเศษในการดูแลรักษา ทุก ๆ คนช่วยกัน

เพราะฉะนั้นก็ไม่แปลกถ้าเราจะจินตนาการ Blockchain เป็นการ "เขียน" ลงกระดาษใหม่แผ่นใหม่แล้วก็เอาไปวางต่อในแฟ้มชั้นต่อ ๆ ไป ให้สูงขึ้นเรื่อย ๆ โดยที่ไม่มีการเอากระดาษแผ่นไหนออกมา และไม่มีการเข้าไปแก้ไข หรือลบข้อมูลในกระดาษแผ่นไหนในแฟ้มเช่นกัน  

## ทำไมเรียกว่า Blockchain (โดยเฉพาะของ Bitcoin)

> Blockchain = chained blocks = block ที่ถูกคล้องเข้าด้วยกันด้วยโซ่

**Block** คือ หน่วยที่ใช้ในเก็บข้อมูล ในที่นี้ก็คือเก็บรายละเอียดธุรกรรมทางการเงิน "การโอนเงิน" ของแต่ละคนในช่วงเวลาหนึ่ง ๆ หน้าตา block จะหน้าตาคล้าย ๆ อย่างนี้ (ในความเป็นจริงมันอาจจะมีอะไรมากกว่านี้)

```
Block {
	header: {
    	previous_block_hash: 0x....... ,
        nonce: 13257864326,
    },
    transactions: [
    	Transaction {
        	input: {
            	address: ...,
                amount: ...,
            },
			output: {
            	address: ...,
                amount: ...
            },
            signature: ...
        },
        Transaction, ...
    ]
}
```

หมายเหตุ: ด้านบนไม่สมจริง เขียนเพื่อความง่ายเท่านั้น

คำอธิบายของ **Block** ด้านบนก็คือ 

1. **Block header** ส่วนหัวที่ไม่เกี่ยวกับ transaction
	1. **previous_block_hash** ไว้สำหรับเก็บข้อมูลว่า "Block ไหนคือ Block ก่อนหน้าอันนี้" ส่วนนี้ก็คือ "โซ่" ที่เชื่อม Block ต่าง ๆ เข้าด้วยกันเป็น blockchain
	2. **nonce** อันนี้เป็นช่องไว้เก็บตัวเลข ซึ่งไม่มีความหมายอะไรสำหรับผู้ใช้ แต่ใช้ในการ "ขุด" เพื่อยืนยัน "สิทธิ์" ซึ่งเราจะได้อ่านต่อไป ... แต่หลัก ๆ แล้วก็คือเราต้องการทำให้ `sha1(Block)` มี pattern แบบหนึ่ง แต่เนื่องจากเราไม่รู้ว่าจะต้องทำอย่างไรให้ได้อย่างนั้น เราจึงทำการค่อย ๆ แก้ค่า nonce ไปเรื่อย ๆ จนกว่าจะได้ค่า hash ที่ต้องการ 
2. **Block body** ในที่นี้ก็จะเก็บ **Transactions** เป็นหลัก 
	1. **Transactions** เป็นเหมือน array เก็บหลาย ๆ transactions โดย แต่ละ **Transaction** จะเก็บว่า แหล่งของเงิน **input** มาจากไหนบ้าง แล้วจะส่งไปที่ไหนบ้าง **out** โดยที่ `output <= input` เสมอ ไม่งั้นก็คือโกง ... แต่หาก `output < input` ส่วนต่างนั้นก็คือค่า ธรรมเนียมการโอนเงิน **Fee** ซึ่งจำเป็นรางวัลสำหรับคนที่สร้าง Block นี้แล้วใส่ transaction ของเราลงไปนั่นเอง 

หมายเหตุ:

1. จริง ๆ แล้ว ไม่มีการ "โอนเงิน" กันจริง ๆ แต่เป็นการเปลี่ยน "เจ้าของ" ของเงินใน bitcoin เฉย ๆ เพราะฉะนั้น หน้าตา blockchain จริง ๆ แล้วไม่ได้เป็นไปตามนี้ input กับ output แทนที่จะเขียนอธิบายว่า "เอาเงินจากใครให้ใคร" จะเป็นว่า "bitcoin ส่วนนี้เปลี่ยนเจ้าของเป็นเป็นคนนี้" แทน 
2. ดังนั้นการหาว่า "บัญชีนี้มีเงินเท่าไหร่" เราก็จะต้องดูว่า เงินก้อนไหนบ้างที่มีเจ้าของเป็นบัญชีนี้แทน ! 
3. ซึ่งทั้งหมดทั้งมวลนี้ โปรแกรมพวก wallet จะทำให้เราเอง ... ทำให้เรารู้สึกว่ามันทำงานเหมือนกับบัญชีธนาคารทั่วไป ทั้ง ๆ ที่จริงแล้ว ราวกับว่าเงินแต่ละก้อน จะมีบันทึกไว้ว่ามใครเป็นเจ้าของด้วยซ้ำ แทนที่จะบอกว่าบัญชี ๆ หนึ่งมีเงินก้อนไหนบ้าง

## ถ้ามีคนเขียนมั่วจะเกิดอะไรขึ้น

Blockchain ในฐานะเป็นฐานข้อมูลหลักของ Bitcoin ก็ย่อมที่จะต้องตอบคำถามให้ได้ที่ว่า "จะสร้างความน่าเชื่อถือได้อย่างไร ?" 

อย่างที่เคยกล่าวมาแล้วข้างต้นว่า ระบบการเงินที่น่าเชื่อถือจะต้อง 

1. บัญชีต้องปลอดภัยไม่มีเงินหาย
2. เงินในระบบจะต้องมีจำกัด
3. ข้อมูลที่เก็บไว้จะต้องไม่สูญหาย !

Blockchain ตอบคำถามเหล่านี้อย่างไร ?

### ทำอย่างไรให้บัญชีเงินไม่หาย

ปัญหานี้แก้ได้ด้วย "ลายเซ็นต์" แต่นั่นไม่ใช่ลายเซ็นต์ที่เราเขียน ๆ กันนะ แต่ว่าเป็น ลายเซ็นต์ดิจิตอล (digital signature) ซึ่งก็อาศัยหลักการเข้ารหัสแบบ Public-key cryptography 

### Public-key cryptography และ digital signature

Digital signature อาศัยเทคนิคทาง public-key cryptography ในการทำ โดยจะอธิบายแบบคร่าว ๆ ได้ดังนี้

1. มีกุญแจ 2 ดอก ดอกแรกเรียกว่า **กุญแจลับ** (private key) ดอกที่สองเรียกว่า **กุญแจสาธารณะ** (public key)
2. หากเราต้องการเซ็นต์ชื่อ เราจะใช้**กุญแจลับ**ในการเซ็นต์ เพราะว่าไม่มีใครรู้นอกจากเรา ดังนั้นก็ไม่มีใครเซ็นต์ได้นอกจากเราเช่นกัน
3. เราจะแจกจ่าย**กุญแจสาธารณะ**ออกไป ให้ทั้งโลกรับรู้ว่านี่แหละคือของเรา 
4. เมื่อไหร่ก็ตามที่เขาต้องการตรวจสอบลายเซ็นต์ของเรา เขาสามารถหยิบกุญแจสาธารณะของเราแล้วก็ลอง "ไข" ดูก็จะพบว่ามัน "ไขได้" แต่ถ้าไปหยิบกุญแจของคนอื่นก็จะไขไม่ได้ แล้วถ้าคนที่เซ็นต์ไม่ใช่เราก็จะไขไม่ได้เหมือนกัน

ถึงตรงนี้อาจจะสงสัยได้ว่า แล้วคนที่ไม่รู้จักเราจะไปรู้ได้ไงว่า กุญแจสาธารณะ อันไหนล่ะ ที่เป็นของเราจริง ๆ ? ปัญหานี้แก้ได้หากเราให้ เลขที่บัญชีของเรา เป็นกุญแจสาธารณะด้วย ! เนื่องจากมันกลายเป็นอันเดียวกัน จึงไม่สามารถเปลี่ยนกุญแจสาธารณะโดยที่ไม่เปลี่ยนเจ้าของได้ !

หมายเหตุ: จริง ๆ แล้ว Bitcoin ไม่ได้ใช้เลขกุญแจสาธารณะเป็นเลขบัญชีแต่อย่างใด แต่อย่างไรก็ตามก็มีคุณสมบัติเดียวกัน

โอเค ... ตอนนี้เรามีลายเซ็นต์ ดังนั้น **Transaction** ไหนไม่มีลายเซ็นต์ ก็จะถูกปัดตกไป 

ใครก็ตามสามารถตรวจสอบลายเซ็นว่าถูกต้องหรือไม่ได้ง่าย ๆ (ในที่นี้) ด้วยการใช้ `address` ไป "ไข" `signature` ถ้าไขได้ก็คือว่า "ผ่าน" ลายเซ็นต์ถูกต้อง แต่ว่าในการรับเงินนั้นไม่จำเป็นที่จะต้องใช้ลายเซ็นต์แต่อย่างใด 

ถึงตรงนี้หวังว่าผู้เขียนจะได้อธิบายพอจะเชื่อได้ว่า ไม่มีใครสามารถ "หยิบ" เอาเงินของเราออกไปได้ยกเว้นแต่ว่า "กุญแจลับ" (private key) ของเราจะ "รั่วไหล" ออกไป ซึ่งนั่นก็แปลว่าเราจะต้องรักษาความลับนี้ให้เท่ากับเงินที่อยู่ในบัญชีนี้ด้วย และถ้าหากว่ามันหายไปไม่ว่าจะด้วยเหตุผลอะไร เงินที่อยู่ในนั้นก็ย่อมหายไปด้วยเช่นกัน

เหตุการณ์เงินหายนี้มีให้เห็นอยู่เนือง ๆ ซึ่งก็มักจะเกิดขึ้นจากคอมพิวเตอร์ที่ใช้ในการเก็บกุญแจลับพวกนี้เสียหาย ก็ทำให้เงินหายจะระบบ bitcoin ไปตลอดกาล เพราะว่าไม่มีใครสามารถเข้าไปเอากุญแจที่ต้องออกมาเซ็นต์จำนวนเงินเหล่านี้ได้อีกแล้ว

การดูแลรักษาเงินในบัญชีจึงไม่ใช่เรื่องที่ตรงไปตรงมาเท่าไหร่ และหลาย ๆ ครั้งผู้เขียนก็พอใจกับการฝากเงินไว้กับผู้ให้บริการข้างนอกมากกว่าดูแลเอง เพราะก็ไม่รู้ว่าจะรักษาอย่างไรใหข้อมูลไม่หาย แต่การไปฝากคนอื่นไว้ก็เสี่ยงถ้าเขาเอาบัญชีของเราไปทำอะไรมิดิมิร้ายเช่นกัน

ตัวอย่างบริการทีสามารถฝากเงินไว้ได้เช่น http://coinbase.com/

### ทำอย่างไรให้เงินในระบบมีจำกัด

อันนี้ทำง่ายมาก หากเรารับประกันได้ว่าบัญชีต่าง ๆ จะต้องไม่มีเงินหาย ไม่มีเงินเกินเข้ามา สิ่งที่เราต้องทำก็คือว่า "ไม่ยอมรับเงินที่ไม่มีที่มา" หากทุก ๆ คนแบบนี้ เงินแบบเดียวที่จะอยู่ในระบบได้ก็จะต้องมีที่มา ก็คือเงินจะต้องมาจากกระเป๋าตังคนอื่นซึ่งก็ต้องมีจริงอยู่แล้ว สุดท้ายหากเราไล่สายไปเรื่อย ๆ เงินก็จะถูกไล่กลับมายังเจ้าของคนแรก ซึ่งก็คือคนที่สร้าง Bitcoin ขึ้นมา (Satohsi Nakamoto; ชือปลอม เขาเป็นคนที่ไม่มีใครรู้ว่าคือใคร) ซึ่งในบัญชีเค้าก็จะมีเงินอยู่จำนวนหนึ่งซึ่งได้แจกจ่ายออกไปเป็นระบบเงินใน Bitcoin ในกระเป๋าทุกคนในปัจจุบัน

#### แต่อันที่จริง Bitcoin มี inflation มีการพิมพ์ "เงิน" ใหม่ ๆ เข้ามาในระบบ

ผู้ที่ออกแบบ Bitcoin นั้นต้องการให้มี "แบงค์" ใหม่ ๆ พิมพ์เข้ามาในระบบเรื่อย ๆ ในอัตราที่ควบคุมได้ และค่อย ๆ น้อยลงเรื่อย ๆ ซึ่งแม้จะมี inflation ของเงินอยู่บ้าง แต่ก็ไม่ได้มากมาย และอยู่ในจำนวนจำกัด และซักวันหนึ่งมันจะไม่เพิ่มเข้ามาอีกแล้ว แบบนี้ก็สามารถควบคุมมูลค่าของเงินได้เช่นกัน ไม่ได้ให้ถึงขนาดที่เงินไร้ค่าไปเลย

แต่การจะอธิบายว่าเงินเข้ามาในระบบ Bitcoin ได้อย่างไรนั้น โดยที่สามารถควบคุมได้ แม้ไม่มีคนมาควบคุมจะอธิบายในหัวข้อต่อ ๆ ไป

### ทำอย่างไรให้ข้อมูลที่เก็บไว้ไม่มีวันสูญหาย

อันที่จริงอีกความหมายหนึ่งก็คือ "ทำอย่างไรให้ไม่มีใครเข้าไปแก้ไขได้ว่า ฉันไม่เคยจ่ายเงินก้อนนี้นะ" หรือการป้องกันไม่ให้ใครเข้าไปแก้ไขอดีตการจ่ายเงินได้นั่นเอง !

ซึ่งตรงนี้เป็นสิ่งที่ยากมาก ๆ สำหรับฐานข้อมูลซึ่งไม่มีใครคุมอย่าง Blockchain ของ Bitcoin นี้ ... ซึ่งปัญหานี้แก้ได้ด้วยการ "พิสูจน์สิทธิ์ในการเขียน" ซึ่งอธิบายเป็นความหมายได้ยากผู้เขียนจะยกตัวอย่างดังต่อไปนี้

สมมติว่าระบบ Bitcoin มีคนใช้งานอยู่ 5 คน A, B, C, D, E ตามลำดับ โดยที่ไม่มีใครรู้เห็นเป็นใจซึ่งกันและกัน สมมติว่าแต่ละคนมีสิทธิ์เท่าเทียมกัน และแต่ละคนก็จะ "ผลัดกัน" มีสิทธิ์เขียนฐานข้อมูล Blockchain นี้ 

1. **รอบแรก** A มีสิทธิ์เขียน
	1. A ก็จะทำตัวเหมือนกับธนาคารชั่วคราว ใครอยากจะโอนเงินหรือทำธุรกรรมใด ๆ ก็จะมาบอก A ให้ช่วยเขียน **Transaction** ของตนลง **Block** ที่ A กำลังจะเขียนต่อลงไปใน **Blockchain** ซึ่ง A ไม่จำเป็นต้องเขียนทุก ๆ Transaction ลงไปใน Block ดังนั้นการให้ **Fee** เล็กน้อย ก็จะเป็นการจูงใจให้ A ยอมเขียนเช่นกัน
	2. เมื่อเวลาผ่านไป สมมติว่า 10 นาที A ปิดการรับฟัง ... **Transactions** ที่ได้รับฟังมาในช่วงเวลานี้ก็จะถูกเขียนลงไปใน Block แล้วก็เอาไปต่อกับ Blockchain ที่มีอยู่แล้ว (ใครมาอ่านก็จะเห็น Transaction ของตัวเอง แล้วก็จะรู้ได้ว่าตอนนี้แต่ละคนมีเงินในกระเป๋าเท่าไหร่)
	3. สิทธิ์การเขียนก็จะเปลี่ยนมือเป็น B
2. **รอบสอง** B มีสิทธิ์เขียน ก็จะทำเหมือนกับตอนที่ A มีสิทธิ์แต่ว่าคราวนี้ B ทำหน้าที่แทน แล้วระบบก็จะทำงานแบบนี้ไปเรื่อย ๆ แล้วค่อยวนกลับมาที่ A ...

ระบบนี้ก็ดูจะทำงานได้ดี ลองนึกถึงกรณีแย่ ๆ เช่น 

1. A พยายามแย่งสิทธิ์เขียน ไม่ยอมให้สิทธิ์คนอื่น ผลที่ตามมาก็คือ คนอื่นก็จะไม่เชื่อถือ A เพราะว่าทุกคนรู้ว่ากฎของระบบนี้คืออะไร และเวลานี้ใครมีสิทธิ์เป็นผู้เขียน เพราะฉะนั้นการที่ A เขียนอะไรโดยที่ไม่มีสิทธิ์ สิ่งที่เขียน ณ เวลานั้นจาก A ก็จะถูกปัดตกโดยคนอื่น ๆ ไปโดยปริยาย
2. สมมติว่า A จะซื้อของ แต่ว่าไม่ยอมเขียน transaction ตัวเองลงไป ก็เลยไม่เสียเงิน ? แต่ ... คนที่จะขายของก็จะยังไม่ได้เงินเช่นกันดังนั้นเขาไม่มีเหตุผลอะไรที่จะให้ของ A เช่นกัน
3. สมมติว่า A จะซื้อของ A ยอมเขียน transaction ลงไป (สมมติ Block เลข 1) เพื่อให้ได้ของมา แล้วหลังจากนั้นก็รอให้รอบต่อไปที่ตัวเองจะมีสิทธิ์เขียน (อีก 4 รอบ) แล้วก็พยายามเขียน Block ใหม่เพื่อมาแทนที่ Block ที่ตัวเองเสียเงิน (Block เลข 1) แสดงว่าตอนนี้จะมี blockchain 2 เส้น เรียกการที่มี blockchain หลาย ๆ เส้นว่า **Forking**
	1. เส้นที่ยาวกว่า คือ 1 (A เสียเงิน) <=> 2 <=> 3 <=> 4
	2. เส้นสั้นกว่า คือ 1 (A ไม่เสียเงิน)

	ในกรณีอย่างนี้ B, C, D, E ก็จะ "เมิน" blockchain เส้นที่สั้นกว่าและจะตามเส้นที่ยาวกว่าเสมอ ! เพราะว่ายิ่งยาว แปลว่ายิ่งน่าเชื่อถือ ... ดังนั้นหาก A ต้องการจะ "แก้ประวัติศาสตร์" จริง A จะต้องสร้าง Blockchain ที่ยาวกว่า ! แต่ว่าก็ทำไม่ได้เพราะว่าทุก ๆ สิทธิ์ในการเขียนที่ A จะได้รับ A จะต้องรอ 4 รอบกว่าจะถึงตัวเองอีกครั้ง ซึ่งก็ไม่มีทางทำให้เส้นที่ตัวเองต้องการยาวเท่ากับเส้นหลักได้แน่นอน !

ด้วยกรณีดังกล่าวเราจะเห็นว่าวิธีการแบบนี้ก็จะรับประกันได้ว่า "จะไม่มีใคร คนเดียว แก้ไขประวัติศาสตร์ได้" นั่นก็คือไม่มีใครกลับไปแก้ว่าตัวเองไม่ได้จ่ายเงินได้ แล้ว Bitcoin ของเราก็น่าเชื่อถือขึ้นมา !

แต่ในความเป็นจริงแล้ว **สิทธิ์ในการเขียน** ไม่ได้วนรอบแบบนี้ แต่ต้องตบตีแย่งชิงเพื่อให้ได้มันมา (ลงทุนนั่นเอง) ดังที่จะอธิบายต่อไปนี้

## สิทธิ์ในการเขียน หรือสร้าง Block ใหม่

ในระบบที่ใหญ่มาก ๆ อย่าง internet เราไม่รู้ว่าเราจะเชื่อใคร เราไม่สามารถกำหนดได้ง่ายว่าใครจะมีสิทธิ์ในการเขียน ดังนั้นคนที่ออกแบบ Bitcoin จึงใช้แนวคิดที่เรียกว่า "Proof of work" หมายความว่า "อยากได้สิทธิ์ในการเขียนหรอ ? ทำงานให้เป็นที่ประจักษ์สิ !" แล้วใครก็ตามที่ทำได้ (ซึ่งสามารถตรวจสอบได้) ก็จะได้รับการยอมรับ และได้สิทธิ์ไป

### Proof of work

การลงแรงเพื่อให้ได้สิทธิ์ที่ว่า แท้จริงก็คือการทำอะไรบางอย่างที่ "ทำได้ยาก" และ "โกงไม่ได้" และ "สามารถตรวจสอบได้ง่าย" ก็เพียงพอแล้ว และวิธีที่ผู้คิดค้น Bitcoin เลือกก็คือ "แข่งกัน hash (sha256) Block ของตัวเอง ให้ได้ค่าที่พึงประสงค์" เมื่อได้ค่า hash ของ block ที่พึงประสงค์แล้วก็จะถือว่า block นั้นได้พิสูจน์ตัวเองแล้วว่ามีสิทธิ์ในการไปต่อ block อื่น ๆ ที่อยู่ใน blockchain แล้ว

เราทราบกันดีว่า crytographic hash จะต้องไม่สามารถหา function ทางคณิตศาสตร์เพื่อ reverse ค่า hash กลับไปได้ ดังนั้นถ้าเราต้องการ สมมติว่าค่า `hash(block) = 10` วิธีเดียวที่เราทำได้ก็คือ "ค่อย ๆ แก้ค่าใน block ทีละน้อย ๆ แล้วก็ลอง hash ใหม่เรื่อย ๆ จนกว่าจะได้ค่าดังกล่าว" 

ในเมื่อ SHA256 มี output จากการ hash ยาวได้ถึง 256 bits ทำให้ความเป็นไปได้ก็มากถึง 2^256 แบบ ซึ่งหากจะต้องทำให้ hash ได้ค่านี้เป๊ะ ๆ เสียก่อนถึงจะมีสิทธิ์ เกรงว่าจะไม่มีใครทำได้ภายใน 10 นาที ดังนั้น Bitcoin จึงไม่ได้ต้องการให้ `hash(block) = x` เป๊ะ ๆ เพียงแต่บอกว่าแค่ `hash(block) < M` ก็พอแล้ว ถ้าหากว่าค่า M ใหญ่ ๆ เราก็จะเจอค่า hash ที่ลงรอยกับค่านี้ได้ง่าย แต่หากว่า M มันเล็ก ๆ คำตอบที่ว่าจะหายากขึ้น 

การ `hash(block)` ที่ว่าแท้จริงแล้วเราก็ไม่ได้ hash ทั้ง Block แต่ว่าเราจะ hash เฉพาะส่วนที่เป็น header ของมันเท่านั้น ซึ่งจะเห็นว่าจะมีค่าที่ปรับได้คือ `nonce` อยู่ ... ค่านี้นี่เองที่จะช่วยให้เราค่อย ๆ หาค่า hash ที่พึงประสงค์ได้ 

> การหาค่า hash ที่พึงประสงค์ ด้วยการค่อย ๆ แก้ค่า nonce ใน Block's header ก็คือการ "ขุด" นั่นเอง !

เนื่องจากพลังการคำนวณของคอมพิวเตอร์มากขึ้นเรื่อย ๆ ในต้นทุนเท่าเดิม (อันนี้ไม่ใช่ Moore's law ซะทีเดียว) และก็มีคนสนใจในการขุด Bitcoin เยอะขึ้นเรื่อย ๆ ด้วย นั่นก็แปลว่านับวัน Block หนึ่ง ๆ ก็จะขุดกันได้ง่ายขึ้น แล้ว 10 นาทีเราก็อาจจะมีมากกว่า 1 Block แล้ว ทำให้จะต้องมีการปรับความยากง่ายอัตโนมัติของ Bitcoin network ซึ่งก็จะพยายามทำให้ขุดได้ 10 นาที 1 Block อยู่ดีนั่นเอง

การขุดจึงมีต้นทุน ก็คือ ค่าไฟฟ้าที่ใช้ในการรันคอมพิวเตอร์นั่นเอง ในเมื่อมีต้นทุน หากเราไม่มีแรงจูงใจ ก็จะไม่มีคนมาทำหน้าที่นี้ และถ้าไม่มีคนมาทำหน้าที่นี้ ระบบ Blockchain ก็จะสมบูรณ์ไม่ได้ ดังนั้นทาง Bitcoin จึงมีผลตอบแทนให้กับนักขุดอยู่ 2 วิธีด้วยกันดังจะกล่าวต่อไปนี้

#### รางวัลจากการขุด

##### ค่าธรรมเนียมการโอน

รายได้ทางแรกที่นักขุดกจะได้ก็คือ "ค่าธรรมเนียมการโอนเงิน" จากที่กล่าวไว้ข้างต้น หาก `sum(inputs) > sum(outputs)` ส่วนที่ต่างก็คือค่าธรรมเนียมให้กับคนที่เอา transaction นี้ไปเขียนไว้ใน Block อันที่จริงหากเค้าไม่ให้ค่าธรรมเนียม นักขุดจะดื้อไม่เขียนลง Block ให้เลยก็ได้ก็เพราะว่า การไม่เอา transaction ลง block ก็ไม่มีใครว่าอะไร และก็ไม่ได้ถือว่าผิดกฎแต่อย่างใด

##### เงินใหม่ ๆ ที่ถูกพิมพ์เข้ามาในระบบ

รายได้อีกทางหนึ่งของนักขุดก็คือ "เงินใหม่ ๆ ที่เข้ามาในระบบ" เนื่องจากความตั้งใจของผู้สร้าง Bitcoin ต้องการให้มี inflation เล็กน้อย กล่าวคือจะมีเงินใหม่ ๆ เข้ามาในระบบด้วย แม้จะมีจำนวนไม่มากนัก แต่ก็พอจะหากำไรได้เหมือนกัน

โดยสำหรับ 210,000 blocks แรกของ Bitcoin (เปิดมาตั้งแต่ปี 2009) นั้น ทุก ๆ Block ที่ขุดได้จะให้สิทธิ์ผู้ที่ขุดได้ "โอนเงินจากบัญชีหมายเลข 0 มาเป็นจำนวน 50 bitcoins" ได้เลย แปลว่าเงินในระบบจะมีเยอะขึ้นทันที 50 bitcoins

และหลังจากนั้น ก็จะค่อย ๆ หาร 2 ลงไปเรื่อย ๆ ทุก ๆ 210,000 blocks และสุดท้ายก็จะ "ไม่มีการสร้าง bitcoin ใหม่ขึ้นมาอีกต่อไป"

อย่างไรก็ดี bitcoin เป็นระบบที่คนส่วนใหญ่เล่นตามกฎ แต่กฎเองก็สามารถเปลี่ยนได้หากคนส่วนใหญ่เห็นด้วย เช่น สมมติว่าคนส่วนใหญ่ vote ให้มีการ inflate เงิน bitcoin ต่อไป มันก็สามารถเป็นไปได้เช่นกัน แต่สำหรับตอนที่ออกแบบนั้นความตั้งใจเป็นแบบนี้

#### ใคร ๆ ก็ขุดได้จริงหรอ ? 

คำตอบที่ "ไม่จริง" ... หากเราท่านเป็น Bitcoin ราคาหน่วยละ 1 แสนบาทอาจจะอยากกระโดดลงไปหาคอมพิวเตอร์มาขุดซะเดี๋ยวนี้ โปรดใจเย็นก่อน เพราะว่าตอนนี้ไม่มีคอมพิวเตอร์ที่เราใช้ ๆ กันอยู่เครื่องไหนบนโลกที่สามารถขุด Bitcoin แล้วคุ้มค่า ! 

เพราะว่าตัว SHA256 ที่ Bitcoin ใช้ในการ hash นั้นคอมพิวเตอร์เราทำได้ซัก 1 แสนครั้งต่อวินาทีก็เก่งแล้วแต่เครื่องที่ทำหน้าที่ "ขุด" โดยเฉพาะนั้นทำได้ หลัก tera-hash ต่อวินาที อย่างตัวนี้ Ant Miner  (https://shop.bitmain.com/overview.htm?name=antminer_s9_asic_bitcoin_miner) ขุดได้ 13.5 TH / S ซึ่งไม่มีทางที่คอมอย่างเรา ๆ จะไปเทียบชั้นมันได้เลย แม้จะกินไฟราว ๆ 1300 Watts ซึ่งเทียบได้กับคอมพิวเตอร์ราว ๆ 8 เครื่องได้ 

เพราะฉะนั้นอย่าขุด Bitcoin ด้วยคอมส่วนตัว !

#### ร่วมด้วยช่วยกันขุด

หากมีใครคนหนึ่งสามารถหา `hash(block)` ที่พึงประสงค์ได้ เค้าก็จะสามารถ ป่าวประรกาศ block ใหม่นี้ให้ไปทั่วราชอาณาจักรได้เลยเช่นกัน และสำหรับคนอื่น ๆ ที่กำลังขมักเขม่นขุดอยู่นั้น ... แสดงว่าการแข่งขันขุดในรอบนี้จบแล้ว และสิ่งที่ทำมาทั้งหมดก็สูญเปล่า สิ่งที่เค้าทำได้ก็คือ เอา transaction ที่ถูกใส่เข้าไปใน block ใหม่นั้นออกไป แล้วก็หยิบบางส่วนใหม่เข้ามา แล้วก็เริ่มขุดอีกครั้ง

จะเห็นว่าการขุด คือ ความเสี่ยง และก็เสี่ยงมาก ๆ ด้วย แม้เราจะมี "พลังประมวลผลมาก" และมีโอกาสมากที่จะขุดได้สำเร็จในรอบนั้น ๆ แต่ไม่ว่าจะมีพลังขนาดไหน โอกาสของเราก็ไม่เคย 100% เพราะว่ามันเป็นการสุ่มเสียมากกว่า ดังนั้น "ทุกคนมีโอกาส" 

แต่สำหรับคนธรรมดา ๆ อย่างเรา ๆ โอกาสที่จะขุดได้มันช่างริบหรี่เหลือเกิน ราวกับว่าไปซื้อหวยแล้วหวังถูกรางวัลที่หนึ่งก็ไม่ปาน ดังนั้นจะดีกว่ามั้ยถ้าเราร่วมมือกันหลาย ๆ คน ช่วยกันชุด แล้วถ้าได้อะไรก็แบ่งกัน ๆ ตามแรงที่แต่ละคนได้ลงลงไป นั่นคือที่มาของคำว่า **Pool Mining** ซึ่ง protocol ที่ใช้ในการทำ pool mining ที่นิยมกันก็เช่น  **stratum** 

ตัวอย่าง pool ที่ผู้เขียนรู้จัก เช่น https://nanopool.org/

### แบบอื่น ๆ ล่ะ ? Proof of stake

Proof of work เป็นเพียง หนึ่งในความเป็นไปได้ ในการตัดสินว่าใครจะมีสิทธิ์ในการ "เขียน" Block ใหม่ เท่านั้น  เพราะว่าอย่างหนึ่งที่ทำได้ก็เช่น "1 คอม 1 เสียง" แต่ก็ต้องยอมรับว่าวิธีอย่างนี้ มีข้อเสียเหมือนกันและทำให้นาย Satoshi Nakamoto เลือกที่ใช้ Proof of work โดยใช้ sha256 เป็นเครื่องมือในการ hash 

การที่วิธีหนึ่ง ๆ จะเข้ามาแทนที่ Proof of work ได้ มันควรจะมีลักษณะอย่างน้อย ๆ ดังต่อไปนี้

1. **โกงสิทธิ์ไม่ได้** อย่างในกรณีของ Proof of work ความแข็งแกร่งของมันก็เท่ากับตัวของ SHA256 เอง เลยหากว่าไม่มีใคร หาทางลัดของ SHA256 ได้ ก็ไม่มีใครโกง Proof of work ได้เช่นกัน
2. **สามารถตรวจสอบสิทธิ์ได้ง่าย** อย่างในกรณีของ Proof of work การตรวจสอบสิทธิ์นั้นทำได้ง่ายมาก ๆ ใครก็ตามสามารถลอง `hash(block)` แล้วก็จะเห็นว่ามันเป็น pattern ที่ถูกต้องหรือไม่ ? 
3. **คนที่โจมตีระบบได้ควรจะเป็นคนในเท่านั้น** ไม่มีระบบไหนที่โจมตีไม่ได้ แต่หากเราเลือกได้ เราควรจะออกแบบให้คนที่สามารถทำลายระบบได้เป็นคนในเท่านั้น "คนใน" ในที่นีหมายความว่าเป็นคนที่ "ถือ" สกุลเงินพวกนี้อยู่ เป็นคนที่มี "ส่วนได้เสีย" กับของพวกนี้อยู่ เพราะหลักเศรษฐศาสตร์มีอยู่ว่า "ไม่มีใครอยากจะทำให้มูลของทรัพย์สินของตัวเองลดลง" หากการที่เขาจะโจมตีจะทำให้เขาเป็นคนที่เสียเงินเอง ก็คงจะไม่มีใครอยากจะโจมตี นั่นก็ยิ่งจะทำให้ระบบนั้นมีเสถียรภาพมากขึ้นไปอีก

หลักการเหล่านี้ถูกนำมาสร้างเป็น Proof of stake ซึ่งจะให้สิทธิ์ตามจำนวน "stake" ที่วางอยู่ ณ กองกลาง โดยการเลือกแบบสุ่ม โดยที่คนมีโอกาสโดนสุ่มได้มากก็คือคนที่ ไปวาง "เงิน" ไว้ ณ กองกลางมาก วิธีนี้ทำให้คนที่มีอำนาจมากคือคนที่ถือสกุลเงินนี้มาก ก็คือคนที่มีส่วนได้เสียกับสกุลเงินนี้มากไปด้วย โอกาสที่เค้าจะทำอะไรเพื่อทำลายทรัพย์สินตัวเองก็ย่อมมีน้อยลง ต่างจาก Proof of work ที่อาศัยพลังประมวลผล เพราะว่าพลังประมวลผลมีความเป็น universal มากกว่า เราไม่มี Bitcoin เราก็อาจจะเอาพลังประมวลผลนี้ไปใช้กับอย่างอื่นก็ได้ ไปขุดสกุลเงินอื่นก็ได้

หมายเหตุ: เนื่องจากในปัจจุบันการ hash sha256 นั้น สามารถทำได้ดีด้วยวงจรอิเล็กทรอทิกส์จำเพาะ (ASIC) ซึ่งทำได้ดีกว่าการใช้ CPU หรือ GPU ในการ hash sha256 มาก ๆ ทำให้ตอนนี้ไม่มีใครที่ขุด Bitcoin ด้วย CPU และ GPU แล้ว (เพราะว่าจะขาดทุน สู้ไม่ได้) นั่นก็หมายความว่าคนที่ลงทุนกับ ASIC เหล่านี้หากต้องการจะเปลี่ยนไปทำอย่างอื่นก็จะได้เฉพาะงานที่เป็น sha256 เท่านั้น ซึ่งอาจจะไม่ได้ universal ดังที่กล่าวเท่าไหร่ แต่อย่างไรก็ตามก็ยัง universal กว่าตัวสกุลเงินเองมากนัก !

# การโจมตี Blockchain

ด้วยธรรมชาติของ Blockchain ที่เป็น decentralized database ซึ่งใช้ทุก ๆ คนช่วย ๆ กันรักษาความน่าเชื่อถือของฐานข้อมูล ตรงนี้ก็จะเป็นว่าหาก "คนส่วนใหญ่" ต้องการเปลี่ยนแปลงฐานข้อมูล หรือร่วมมือกันโจมตี ก็จะเป็นไปได้ที่จะทำลาย Blockchain นั้น

## 51% Attack 

การโจมตีแบบแรก ก็ค่อนข้างตรงไปตรงมา ก็คือ ทำอย่างไรก็ได้ให้ได้พลังประมวลผลมากกว่า 50% ของทั้งระบบ Bitcoin

เมื่อเราได้พลังคำนวณขนาดนั้น สมมติว่าราว 51% นั่นแปลว่า เรามีโอกาสมากกว่าครึ่ง ที่จะเป็นผู้มีสิทธิ์สร้าง Block ต่อ ๆ ไปในภายภาคหน้า (ไม่ได้รับประกันอยู่ดีแค่มีโอกาสมากกว่าครึ่ง) แล้วเราจะทำอะไรได้บ้าง ? 

1. เราสามารถ **Fork** Blockchain ได้โดยมีโอกาสสำเร็จสูง
2. เราสามารถ **Denial of Service** โดยการไม่ยอมนำ transaction บางส่วนที่เราไม่พอใจ ใส่เข้าไปใน Blockchain ได้

การ **Fork** Blockchain ได้สำเร็จหมายความว่าเราสามารถ "กลับไปแก้ไขข้อมูลของ Block ก่อน ๆ หน้า" (Fork) แล้วยังสามารถสร้าง Block ต่อ ๆ จากนั้นให้ยาวกว่าอันเก่าได้ เมื่อเราทำได้ Blockchain ใหม่ของเรา (ที่เราแก้ไขอดีตไปแล้ว) ก็จะถือว่าเป็นความจริงของ Bitcoin ไปเลย !

หากเราแก้ไขอดีตได้ ... สิ่งที่เราทำได้แน่ ๆ ก็คือ **"เราสามารถย้อนกลับไป ตอนที่เรายังไม่เสียเงินได้!"** 

แต่ก็จะเห็นว่า หากเราต้องการแก้ไข "อดีตที่ไกลมาก ๆ" อย่างเช่น 20 Block ที่แล้ว เราก็ต้อง fork จากจุดที่ 20 Block ที่แล้ว แล้วก็ต้องพยายามขุด ๆ ให้วิ่งนำ blockchain ของจริงซึ่งนำอยู่ 20 Block ถ้าหากเราไม่มีพลังคำนวณมหาศาลแล้ว ก็ยากมาก ๆ ที่จะตามทันเส้นจริง แต่อย่างไรก็ดีหากเรามีพลังคำนวณ 51% ใน มือซักวันเราก็จะตามทันอยู่แล้ว

แต่นั่นก็แปลว่ายิ่งเราต้องการแก้อดีตไกล ๆ ยิ่งทำได้ยาก นั่นก็แปลว่ายิ่งอดีตไกล ๆ ยิ่งน่าเชื่อถือ นี่จึงเป็นที่มาของ ไอเดียที่ว่าการซื้อของใน Bitcoin (ที่มีมูลค่านิดนึง) จะต้องรอถึง 6 Block ให้มาทับเสร็จแล้วก่อน (หรือรอประมาณ 1 ชม) จึงจะถือว่า โอเค เชื่อถือได้

ในการใช้งานจริงกับสิ่งของที่มีมูลค่าไม่มากนัก มันก็ไม่ได้เป็นเรื่องเสียงมากมายอะไรถ้าหากเรา จะยอมรับตั้งแต่ไม่มี Block มาทับมันก็ได้ หรือว่าถ้ารีบกว่านั้นขอแค่ Transaction ของเราได้เข้าไปรอเขียนลอง Blockchain แล้วก็โอเคก็ได้เหมือนกัน 

ในความเป็นจริงการได้มาซึ่ง 51% ของพลังคำนวณเป็นอะไรที่เป็นไปแทบไม่ได้สำหรับคน ๆ เดียว หรือองค์กร ๆ เดียว แต่หากว่ามันเป็นไปได้ ก็อาจจะเป็นไปได้เพราะอาศัยเทคนิคเหล่านี้ช่วย

1. โดยอาศัย bot หรือไวรัสบางชนิด ทำงานโดยไปทำให้เครื่องจำนวนมากติดไวรัสแล้วผู้พัฒนาสามารถควบคุมให้เครื่องเหล่านี้ขุด Bitcoin ตามที่ต้องการได้ ถ้าหากว่ามีเครื่องที่ติดอันนี้มากเข้า ๆ จนมีพลังคำนวณรวมได้มหาศาลคนที่ควบคุม botnet ตัวนี้ก็จะมีอำนาจมากขึ้นเช่นกัน
2. โดยเจ้าของ mining pool เราทราบกันดีว่า mining pool เป็นเหมือน "สรณะ" ของนักขุดมือสมัครเล่น ก็เพราะว่าด้วยพลังคำนวณที่พวกเขามี เขาแทบจะไม่มีโอกาสได้เงินเลย ถ้าเราไปแยกขุดคนเดียว เขาจึงต้องมาร่วมมือกัน แต่รวม ๆ กันเข้า มันก็มีพลังไม่น้อยเหมือนกัน โดยส่วนใหญ่แล้ว mining pool ก็จะมีเจ้าของ และอันที่จริงเจ้าของจะใช้พลังคำนวณไปทำอะไรก็ได้ทั้งนั้นหากไม่ได้รับการตรวจสอบจากสมาชิก (ซึ่งก็ไม่ค่อยจะตรวจสอบกัน ขอแค่จ่ายเงินมาครบก็พอ) ดังนั้นหากเจ้าของ mining pool ทำการขุดเพื่อการส่วนตัว หรือทำการโจมตีด้วย 51% Attack ก็พอมีโอกาสเป็นไปได้สำหรับ mining pool ใหญ่ ๆ มาก ๆ หรือว่าหลาย ๆ mining pool รวมหัวกัน

## การขุดด้วย Quantum Computer 

> นักวิจัยออกแบบระบบ blockchain เผื่ออนาคต กรณีคอมพิวเตอร์ควอนตัมขุดเหมืองได้เร็วเกิน https://www.blognone.com/node/93288

ด้วย Quantum computer เราสามารถ search 1,000,000 ความเป็นไปได้ ด้วยการทดสอบเพียง 1,000 ครั้งเท่านั้น (หรือ square-root ของ search space) ด้วย [Grover Algorithm](https://en.wikipedia.org/wiki/Grover%27s_algorithm)

ในอนาคต Quantum computer จะแพร่หลายมากขึ้น และการ hash ไม่ว่าจะ hash ด้วยอะไรเพื่อให้ได้ pattern ผลลัพธ์ที่ต้องการ (ในที่นี้สำหรับ proof of work) ก็จะทำได้ง่ายขึ้นเป็น "ทวีคูณ" ไม่ใช่เท่าตัว ! 

นั่นทำให้คนที่มี Quantum computer สามารถหา hash ที่พึงประสงค์ได้ดีกว่าคนที่เป็นเจ้าของคอมพิวเตอร์ทั่ว ๆ ไปมาก ๆ (หรือแม้แต่เครื่อง ASIC ก็ไม่ยกเว้น) และทำให้ความสามารถในการ hash กระจุกตัวอยู่ในมือของคนที่มีศักยภาพไม่กี่คน และทำให้เขาเหล่านนี้สามารถกำหนดอนาคตของ blockchain ได้ หรือแม้แต่การแก้ประวัติศาสตร์เลยก็ตาม !

อย่างไรก็ดีในอนาคต Bitcoin ก็จะต้องอาศัยวิธีการใหม่ ๆ ในการ proof of work แทนที่การหา hash ที่พึงประสงค์อย่างเดียว อันที่เป็นอยู่ในปัจจุบัน 

# Blockchain Limitations

> Blockchain นั้นยังเยาว์มากนัก ยังมีอะไรที่ต้องแก้ไข ปรับปรุงเพื่อการใช้งานจริงอยู่มาก ... 

## Sizing

ความสามารถหลักอย่างหนึ่งของ blockchain ก็คือมันไม่ลืมอดีต ก็แสดงว่าข้อมูลทั้งหมดตั้งแต่ต้น blockchain จนถึงหางของ blockchain จะต้องมีคนเก็บ และก็ไม่ควรเก็บอยู่คนเดียวด้วย 

และแม้ว่าในการทำงานจริง ๆ แล้วไม่จำเป็นที่ทุกเครื่องจะต้องเก็บทุก ๆ อย่างของ blockchain เอาไว้ แต่ก็ต้องมีเครื่องจำนวนหนึ่งที่ต้องเก็บไว้ เมื่อขนาดของ blockchain ใหญ่ขึ้น เครื่องเหล่านี้ที่จะเก็บไว้ได้ก็ต้องเป็นเครื่องที่มีความสามารถพิเศษ ซึ่งอาจจะไม่ใช่สิ่งที่คนทั่ว ๆ ไปตามบ้านสามารถทำได้ แล้คนที่เก็บข้อมูลจริง ๆ ก็คือคนที่มีอำนาจพิเศษบางอย่าง หรือคนกลุ่มน้อย ๆ เท่านั้น

## Throughput

ความสามารถในการรองรับ transaction ต่อ หนึ่งหน่วยเวลา ของ bitcoin และ application อื่น ๆ ที่ใช้ blockchain นั้นมีจำกัดมาก ๆ ยกตัวอย่างเช่นในกรณีของ bitcoin ใช้ block_size 1 MB และ 1 block / 10 นาที นั่นแปลว่า ถ้า 1 transaction มีขนาด 180 bytes 10 นาทีก็จะมี transaction ได้แค่ 1 * 1000 * 1000 / 180 = 5,555 transcations นั่นก็คือ ราว 10 transaction / วินาที ซึ่งไม่ได้เยอะเลย ถ้าลองคิดว่า คนทุกคนบนโลกใบนี้จะใช้ bitcoin เป็นช่องทางหลักช่องทางเดียวในการจับจ่ายซื้อของ 

### เพิ่มความถี่ของ Block

แทนที่จะอนุญาตให้มี 1 block ทุก ๆ 10 นาที ถ้าเราเปลี่ยนเป็น 1 block ทุก ๆ 10 วินาทีแทน ? เป็นไปได้ไหม ? 

ถ้าเราทำได้เราก็จะมี throughput เพิ่มขึ้นมาเลย 60 เท่า ! ซึ่งก็ดูเป็นการพัฒนาที่ก้าวกระโดดทีเดียว !

คำตอบก็คือเป็นไปได้ แต่ว่ามันก็มีข้อเสียไม่น้อยเหมือนกัน ปัญหาที่จะเจอแน่ ๆ ก็คือ กว่าที่ block ๆ หนึ่งจะกระจายตัวไปถึงทุก ๆ คนใน network ทั้งโลก อาจจะอาศัยเวลามากกว่า 10 วินาที การเพิ่มความถี่ของ block ก็คือการเพิ่มโอกาสการ fork ของ blockchain เพราะว่าจะมีคนที่ขุดได้ block ใหม่ โดยที่ไม่รู้ตัวว่ามีคนขุดได้ตัดหน้าไปก่อนแล้วมีมากขึ้น

ปัญหาการ fork ก็จะทำให้มีงานที่ไม่ได้รับค่าตอบแทนมากขึ้น ซึ่งก็ไม่เป็นผลดีต่อผู้ที่ลงทุนในการขุด block เหล่านี้

### เพิ่มขนาดของ Block

การเพิ่มขนาดของ block ก็คือการเพิ่ม "เวลา" ที่ block ต้องใช้ในการ broadcast ไปให้ทั่ว internet ซึ่งในมุมนึงก็ไม่ต่างกับการที่เราเพิ่มความถี่ของ block เท่าไหร่ ผลที่ตามมาก็คือมีโอกาสที่จะทำให้ fork เยอะขึ้นแล้วงานที่ไม่ได้รับผลตอบแทนก็มีมากขึ้นไปด้วย

### สรุป

จะเห็นว่า internet ในปัจจุบันยังเป็นคอขวดของการพัฒนา bitcoin ให้สามารถใช้งานได้สำหรับทุก ๆ คนอยู่ เราแค่ไม่มีทางออกที่ดีพอสำหรับการแก้ปัญหานี้ ในตอนนี้ ในอนาคตหาก internet ของเรามี bandwidth ที่ดีขึ้นมาก ๆ broadcast delay ของ block หนึ่ง ๆ ก็ย่อมน้อยลง และก็ย่อมทำให้โอกาสที่จะ fork มีน้อยลงตามไปด้วย นั่น เราก็จะสามารถเพิ่มความถี่ หรือเพิ่มขนาดของ block ไปด้วยได้ 

แต่ว่าในการแก้ไขค่าเหล่านี้จะต้องอาศัย "การยอมรับ" จากเสียงส่วนมากในระบบของ Bitcoin เอง ซึ่งเป็นสิ่งที่ Bitcoin เผชิญอยู่ตอนนี้ (อาจจะเป็นข่าวเก่าแล้ว ตอนนี้อาจจะคุยกันรู้เรื่องแล้ว) เพราะว่านักคนส่วนใหญ่ของ Bitcoin กระจุกตัวอยู่ในประเทศจีน แล้วก็ไม่มีความต้องการในการแก้ไข Bitcoin จากสิ่งที่มันเป็นอยู่ทำให้การ vote แต่ละครั้งก็ไม่มีผล

แต่หาก Bitcoin แก้ไขปัญหาเหล่านี้ไม่ได้ Bitcoin เองก็จะไม่มีทางโตไปมากกว่านี้ และก็จะเสียโอกาสให้กับ Cryptocurrencies ชนิดใหม่ ๆ ที่กำลังไล่บี้เข้ามา

# การลงทุนใน Bitcoin และ Cryptocurrencies อื่น ๆ 

การลงทุนในสกลุเงินเหล่านี้สามารถทำได้หลายวิธีด้วยกันแต่ว่า กำไรของการลงทุนจะมาจากหาทางเดียวคือ "ผลต่างราคา" เท่านั้นก็เพราะว่าเงินไม่ใช่ธุรกิจ มันไม่ปันผล ! 

หนทางในการลงทุนที่เป็นไปได้มีดังต่อไปนี้ 

1. **ซื้อสกุลเงินแล้วก็ถือรอให้มันโต แล้วก็ขายตอนที่ราคาแพง** การลงทุนในสินทรัพย์แบบนี้โปรด "ใจแข็ง" และ "ใจเย็น" ให้มาก โปรดจำไว้ว่าเราลงทุนในสินทรัพย์ที่ "ไม่มีราคาพื้นฐาน" "ไม่มีมูลค่าในตัวเอง" "ไม่สามารถขายทอดตลอดถ้ามันล้มละลายได้" ดังนั้นเงินที่ส่งเข้าไป 100 บาทอาจจะออกมา 0 บาทก็ได้ ดังนั้นเตรียมตัวรับความเสี่ยง และราคามันผันผวนแน่นอน แต่ถ้าเรารู้ว่าแนวโน้มมันขึ้น โปรดอดทน เราจะต้องลงทุนในสินทรัพย์เหล่านี้โดยหวังว่า 3 ปี 5 ปี มันจะแพง ไม่ใช่พรุ่งนี้มันจะแพง !
2. **ลงทุนในการขุดสกุลเงินเหล่านี้ เพื่อให้ได้ส่วนแบ่งจากการขุด แล้วก็ถือรอให้มันแพง**
	1. ซื้อคอมพิวเตอร์เอง และดูแลเอง ตรงนี้ก็จะได้ต้นทุนที่ถูกหน่อยแต่ว่าก็ต้องศึกษามาก และต้องเสียเวลาในการดูแลรักษา
	2. ซื้อคอมพิวเตอร์เอง แต่ให้คนอื่นดูแล ตรงนี้ฝั่งที่รับดูแลอาจจะต้องการส่วนแบ่งจากการขุด 
	3. ซื้อส่วนแบ่งจากบริษัทที่ลงทุนในอุปกรณ์การขุด (ซื้อสัญญาการขุด) วิธีมีความแปลกนิดนึงคือมีคนซื้อระบบการขุดที่มีประสิทธิภาพสูงมาจำนวนมาก และมีการดูแลรักษาให้ แต่เนื่องจากไม่ต้องรับความเสี่ยงทั้งหมดด้วยตัวเอง จึงตัดบางส่วนออกมาขายเป็น "สัญญา" เช่น สมมติว่าขายพลังประมวลผล 10 หน่วย ด้วยราคา 100 บาท โดยมีค่าดูแลรักษา 10 บาทต่อเดือน อะไรแบบนี้ โดยที่เราก็จะได้เป็นเจ้าของพลังประมวณผล 10 หน่วยซึ่งจะเริ่มหาเงินให้เราทันที แต่ว่าเมื่อไหร่ที่เงินที่ได้จากการขุด มันไม่คุ้มกับค่าดูแลรักษาที่ 10 บาทต่อเดือน สัญญาก็จะถือว่ายุติ โปรดระวังการลงทุนในรูปแบบนี้เพราะว่ามีโอกาสเป็นของปลอมมาก !
3. **ลงทุนในกองทุนที่ลงทุนในสกุลเงินเหล่านี้** (ยังมีกองทุนแบบนี้จำกัดมาก ๆ และไม่น่ามีในไทย) ผู้เขียนเองก็ยังหาหนทางในการลงทุนแบบนี้อยู่เหมือนกัน !

## (Extras) Ethereum 

> อันนี้จะเป็นประสบการณ์ตรงเสียหน่อย เพราะว่าผู้เขียนก็ได้ทดลองขุด Ethereum มาเป็นเวลาหลายเดือนติดต่อกันแล้ว โดยตั้งคอมไว้ที่คอนโด 

### Ethereum มีทำไม ในเมื่อมี Bitcoin แล้วหนิ !

เป้าหมายของ Ethereum จริง ๆ แล้วไม่ใช่ "สกุลเงิน" แต่เป็นท่องทางในการทำ "สัญญาอิเล็กทรอนิกส์" ( smart constracts) ซึ่งผู้เขียนก็ไม่ได้เข้าใจลึกซึ้งว่าสัญญาแบบนี้มันจะทำงานอย่างไร

แต่ในมุมกว้าง ๆ Ethereum เปิดโอกาสให้เราเขียน "โค้ด" ด้วยภาษาคอมพิวเตอร์ซึ่งสามารถมีผลต่อสินทรัพย์ในระบบ Ethereum ได้ โดยที่ทั้งสองผ่านแสดงความจำนงไว้ล่วงหน้าว่า โค้ดดังกล่าวจะทำงานเมื่อเกิดเหตุการณ์หนึ่ง ๆ ขึ้น ซึ่งในเขียนสัญญาดังกล่าวผู้เขียนก็ต้องจ่ายค่าทำงานของสัญญาล่วงหน้าไว้ด้วยตามขนาดของสัญญา ประเมินด้วย **Gas** ซึ่งเหมือนกับค่าจ้างที่ต้องจ่ายเพื่อทำให้สัญญาดังกล่าวทำงาน ยิ่งสัญญาซับซ้อนทำงานนานก็ยิ่งต้องจ่ายแค่ทำสัญญาล่วงหน้าแพง ค่าที่ใช้จ่ายในการทำสัญญาคือ **Ether** ซึ่งเป็นสกุลเงินหลักของระบบนี้

ดังนั้นเราขุด **Ether**

### การขุด Ethereum ด้วยการ์ดจอ

เหมือนกับ Bitcoin ที่ใช้ Proof of work; Ethereum เองก็ใช้ Proof of work แต่ต่างกับ Bitcoin ที่ Ethereum ออกแบบระบบ hash เองเรียกว่า Ethash (แต่ก็ไม่ได้สร้างเองทั้งหมด เป็นการพัมนาต่อมากกว่า) ซึ่งถูกออกแบบโดยมีเป้าหมายว่าต้องการให้มันรันได้ยากบน วงจรอิเล็กทรอนิกส์เฉพาะทาง (ASIC) เพราะต้องการให้การขุดตามบ้านสามารถเป็นไปได้ นั่นก็เป็นเพราะ Ethereum อยากจะให้มีการกระจายของการขุดให้มากที่สุดเท่าที่เป็นไปได้ เพื่อป้องกันการควบคุมทั้งระบบโดยคนกลุ่มน้อย ๆ 

ด้วย Ethash นี้ ทำให้เราสามารถใช้ GPU ในการช่วยประมวลผล ซึ่งตอนนี้ก็เป็นวิธีที่ดีที่สุดในการขุด Ether โดยหน่วยที่ใช้วัดความสามารถในการขุดตอนนี้อยู่ในระดับ MH/s หรือ ล้าน hash ต่อวินาที 

แต่ก่อนที่เราจะถลำลึกไปกว่านี้โปรดทราบว่า สมมติว่าวันนี้เราขุดด้วย 100 MH/s แล้วได้สมมติว่า 1 Ether ต่อเดือน ไม่ได้แปลว่าเดือนต่อไปเราจะได้ 1 Ether เช่นเดิม ต้องเข้าใจว่านับวันยิ่งจะมีคนมาขุดมากขึ้น และนับคอมรุ่นใหม่ ๆ ก็ยิ่งจะเร็วขึ้น ทำให้เรามีความสามารถในการแข่งขันน้อยลง ส่วนแบ่งเราก็น้อยลงเรื่อย ๆ ด้วย ซึ่งซักวันหนึ่งคอมพิวเตอร์เราก็จะไม่ "ไม่คุ้ม" ในการขุด Ether แล้ว โดยปกติเราน่าจะคาดหวังได้ซัก 2-3 มีอย่างน้อย ก่อนที่จะตกรุ่น

> ดังนั้นการขุดคือ ต้นทุนที่เท่าเดิม การแข่งขันสูงขึ้น แต่ราคาของ Ether เป็นสิ่งที่ไม่แน่นอน (แต่ก็มีแนวโน้มขึ้น)

#### หาเครื่องคอมพิวเตอร์ที่เหมาะสมในการขุด

สิ่งที่ควรรู้ก่อนการขุดก็คือ 

1. ค่าใช้จ่ายมาจาก "ค่าไฟ" + "ค่าคอม"
2. CPU ไม่ต้องใช้ในการขุด
3. RAM ไม่ได้ใช้เยอ
4. HDD ยิ่งไม่ต้องการเลย
5. GPU ต้องมี memory มากกว่า 2 GB ไม่งั้นจะรัน Ethash ไม่ได้
6. GPU ควรจะมี memory bandwidth เยอะ ๆ เพราะฉะนั้นควรเลือกซื้อรุ่นใหม่ ๆ ถ้าทำได้

##### การเลือกซื้อ GPU 

หากต้องการจะเป็นมือใหม่หัดขุดก็ควรจะไปดูว่า การ์ดจอรุ่นไหนขุดได้ดี ราคาถูก และกินไฟน้อย ซึ่งจากเท่าที่ดูนั้น การ์ดจอค่าย AMD ดูจะให้ความคุ้มค่าดีกว่า อย่างไรก็ตามผู้เขียนไม่ได้ซื้อจาก AMD แต่ซื้อฝั่ง Nvidia เพราะต้องการเอาการ์ดจอมาทำ Deep Learning ด้วย 

ซึ่งผู้เขียนได้ซื้อ GTX 1060 ซึ่งมีพลังการขุดอยู่ประมาณ 18.5 MH/s ซึ่งไม่เลวเลยทีเดียว

### Setup

1. CPU Intel Core i5 6500 อะไรซักอย่าง
2. RAM 16 GB DDR4 
3. HDD 240 GB Sandisk SSD
4. GPU Nvidia GTX 1060 6 GB GDDR5 - 100 W
5. ลง elementaryOS (linux; based on Ubuntu 16.04) 
6. Nvidia Driver 387
7. Docker + Nvidia Docker
8. ตัวขุดของ Genoil (https://github.com/Genoil/cpp-ethereum)
9. ทำให้รันบน Nvidia Docker ได้ตาม (https://blog.konpat.me/ethereum-cuda-mining-with-nvidia-docker/) 

ผมคำนวณแบบเล่น ๆ ว่าคอมพิวเตอร์ผมน่าจะกินไฟซัก 130 Watts โดยประมาณ เพราะว่า CPU ไม่ได้ทำงานอะไรในงานนี้ ยิ่งถ้าเราต้องเปิดคอมพิวเตอร์ทำอะไรซักอย่างอยู่แล้วต้นทุนนี้ยิ่งต่ำลงไปอีก

### ผลตอบแทนการขุด

ตอนแรก ๆ ประมาณ 3-4 เดือนที่แล้วผมขุดได้ 0.2 Ether / 3 วัน 

แต่มันก็ได้น้อยลงเรื่อย ๆ โดยในช่วงเดือนที่ผ่านมาราคามันพุ่งขึ้นมาก และทำให้คนสนใจเข้ามาขุดมากขึ้นตอนนี้ผมใช้เวลา 0.2 Ether / 15 วัน

ผลตอบแทนโดยเฉลี่ยตอนนี้ 130 บาท / วัน 

ค่าไฟ 130 Watts * 24 Hours / 1000 * 3 บาท / หน่วย = 10 บาท / วัน 

**กำไรคงประมาณ 120 บาท / วัน**

แต่ก็ยังกำไรอยู่ดี มากขึ้นเสียด้วย เพราะว่าราคามันขึ้นมามากกว่านั้น แต่ก็ควรระวังว่าราคาตอนนี้เป็น "ฟองสบู่" ซะมาก เนื้อไม่ค่อยมี มันจะลงได้อีกเยอะ แต่ว่ามันก็จะค่อย ๆ กลับมาถ้ามันดีจริง ๆ 
